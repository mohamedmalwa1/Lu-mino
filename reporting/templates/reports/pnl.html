{% extends "reports/base_report.html" %}
{% block content %}
{% load tz %}
{% now "Y-m-d H:i" as now %}
{% with title="Profit & Loss" %}
{% endwith %}
<h2>Profit &amp; Loss</h2>
<p><strong>Period:</strong> {{ start }} → {{ end }}</p>

<table class="rp-table">
  <thead>
    <tr>
      <th>Date</th><th>Reference</th><th>Description</th><th class="num">Inflow</th><th class="num">Outflow</th>
    </tr>
  </thead>
  <tbody>
    {% for t in transactions %}
      <tr>
        <td>{{ t.date }}</td>
        <td>{{ t.reference|default:"—" }}</td>
        <td>{{ t.note|default:t.description|default:"" }}</td>
        <td class="num">{% if t.is_inflow %}{{ t.amount }}{% else %}—{% endif %}</td>
        <td class="num">{% if not t.is_inflow %}{{ t.amount }}{% else %}—{% endif %}</td>
      </tr>
    {% empty %}
      <tr><td colspan="5" class="muted">No transactions</td></tr>
    {% endfor %}
  </tbody>
  <tfoot>
    <tr><th colspan="3" class="num">Revenue</th><th class="num">{{ revenue }}</th><th class="num">—</th></tr>
    <tr><th colspan="3" class="num">Expenses</th><th class="num">—</th><th class="num">{{ expense }}</th></tr>
    <tr><th colspan="3" class="num">Profit</th><th colspan="2" class="num">{{ profit }}</th></tr>
  </tfoot>
</table>
{% endblock %}

